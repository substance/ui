// TODO: put shared code betw. reader and writer here